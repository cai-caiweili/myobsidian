---
{"dg-publish":true,"aliases":null,"tags":["黑群晖","群晖问题","mac地址冲突"],"title":"黑群晖mac地址冲突","permalink":"/cangku1/0102-erjixitong/群晖/黑群晖mac地址冲突/","dgPassFrontmatter":true,"noteIcon":""}
---

### 问题起因

因为自己买了两个nas，虽然有两条宽带，但是刚开始是都接在一个网络里的，而且我安装黑群辉的固件都是用的同一个，这就导致我的黑群晖的mac地址都是一样的，导致我的网络唤醒功能失效，所以需要修改其中一台的mac地址。

### 解决方法

#### 修改黑群晖mac地址和sn码的各种教程链接

##### 在线修改

##### 在黑群中修改
本教程适用于黑群晖DSM6.X版本，不适用于5.2及以下版本。

一、在电脑浏览器以管理员admin登录黑群晖，打开桌面Flie Station，在homes处（不一定非要在homes文件夹下新增，在任意文件夹均可）新增文件夹，取名boot；



二、在 boot 文件夹点右键，属性； 



三、所在位置这里会显示当前boot文件夹的实际路径，记下来，后面需要用到；



四、进入群晖控制面板，任务计划，新增，触发的任务，用户定义的脚本；



五、常规选项：任务名称随意命名，我写的是“modi boot”，需要注意的是用户账号要选root，先不要点确定！先不要点确定！先不要点确定！；



六、点“任务设置”，在用户定义的脚本里面输入以下命令，输入完成，再点“确定”：

cd /dev mount -t vfat synoboot1 /volume1/homes/boot



七、在控制面板，任务计划，找到刚才新增的计划，点右键，运行；



八、点：是；



九、再回到Flie Station的boot路径，刷新一下，神奇的事情发生了：里面居然显示的引导盘的东西！如果没有东西出来，证明你输入的路径不对，请在本页向下翻看，按照补充说明里面的第6步操作，把正确的路径找出来；



十、进入grub这个文件夹，找到grub.cfg，右键，下载；



十一、存放到你方便修改的地方；



十二、在你的电脑，用Notepad++打开刚才下载的grub.cfg这个文件（注意不要用记事本编辑，否则有可能格式会乱），修改第24-25行显示的sn mac1；

特别说明：

1、如果你只有单网口，只需要set mac1就行了；

2、如果有双网口，请在set mac1=这行下添加一行，写上set mac2=，以此类推；

3、修改完成请记得保存；



十三、回到Flie Station的boot/grub路径，点上传菜单，上传-覆盖；



十四、找到刚才修改好的grub.cfg这个文件，打开；



十五、上传完成；



十六、群晖控制面板，任务计划，找到前面添加的任务，右键，删除；



十七、删除；



十八、点群晖右上角人头像的菜单，重新启动；



十九、新的SN MAC在群晖重启后就生效了，如果你的群晖没有设置静态IP地址的，有可能IP地址会发生变化的，需要在电脑上用群晖助手重新搜索一下。

二十、注册和登录QuickConnect的教程，请查看《群晖注册和登录QuickConnect需要注意的细节》。

补充说明：二合一系统的修改方法（使用上面的方法无法找到正确路径的，也适用以下方法）

正常安装的黑群晖系统，都有单独的引导盘和若干个存储盘组成。所谓二合一的系统不是说群晖和别的系统一起，是说当前的群晖系统没有使用独立的引导盘，而是在存储盘上面划分出另外的分区来做引导盘，使引导盘和存储盘合二为一。二合一的黑群晖系统一般在暴风酷播云和蜗牛星际上使用比较多，它们引导盘的路径和独立引导盘的路径有点不同，因此需要找出正确的引导文件所在的路径。

1、登录二合一群晖系统，打开桌面的File Station，在一个非中文名字的共享文件夹下建立一个文件夹，本教程在home里面建立boot这个文件夹；



2、在boot文件夹右键，属性；


3、在弹出的对话框中，找到位置，把这个路径复制出来，一会要用到；


4、打开群晖控制面板，任务计划，新增，触发的任务，用户定义的脚本；


5、创建任务的对话框中，在常规的选项中，填写一个任务名称，需要注意的是：用户账号这里要选root，先不要点确定！先不要点确定！先不要点确定！；


6、点：任务设置，找到用户定义的脚本，输入以下内容后点确定（不要全部照抄！不要全部照抄！不要全部照抄！红字部分为第3步复制的路径）：

cd /dev ls sd* > /volume1/homes/admin/boot/1.txt



7、在任务计划列表中找到刚刚新增的计划，点右键，运行；


8、点：是；


9、回到File Station，在第一步建立的boot这个文件夹里面右键刷新一下，会看到有一个文件：1.txt，在文件上点右键，下载；


10、在Win电脑上用Notepad++编辑器（不要用记事本，格式会错乱）打开1.txt这个文件，会看到里面写有 sda、sda1、sda2、sda3、sda4、sda5等等这些名字（每个人使用的硬盘数量和位置不同，这里显示的也会有区别）；


11、回到群晖的File Station，在1.txt这个文件点右键，删除；


12、确认删除 ；


13、在任务计划列表中找到刚才增的计划，选中它，点菜单上的编辑；


14、找到第二行的命令；


15、改成以下内容（不要照抄！不要照抄！不要照抄！把下图划线的地方，替换成在第10步获取的名字，一个一个的放上来试，总有一个是对的。比如这台机器用sda3就对了）：

cd /dev mount -t vfat sda3 /volume1/homes/admin/boot


16、找到刚刚修改的任务计划，点右键，运行；


17、点：是；


18、回到File Station，把boot文件夹刷新一下，如果你第15步输入的路径是对的，这里就有显示有grub这个文件夹，引导就在里面（如果没有东西出来，表示路径不对，请把第15步路径修改后重新做）；


19、进入grub文件夹，找到grub.cfg这个文件，右键下载到电脑；

20、按照上面教程第十二步继续操作。


##### 重新刷写固件修改
